package Test_Groww;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.time.Duration;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.remote.RemoteWebDriver;
import org.openqa.selenium.support.events.EventFiringDecorator;
import org.openqa.selenium.support.events.WebDriverListener;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

import utils.EventHandler;
import utils.Reporter;
import utils.Screenshot;

public class Test_groww{
	public static WebDriver driver;
	public Reporter rr;
	public Screenshot ss;
	
 @BeforeMethod
    public WebDriver beforeMethod() throws MalformedURLException {
		ChromeOptions chromeOptions = new ChromeOptions();
		driver = new RemoteWebDriver(new URL("http://localhost:4444/"), chromeOptions);
		driver.get("https://groww.in/");
		driver.manage().timeouts().pageLoadTimeout(Duration.ofSeconds(10));
		WebDriverListener listener = new EventHandler();
		driver = new EventFiringDecorator<>(listener).decorate(driver);
		return driver;
        
    }
	@Test
	public void testcase() throws InterruptedException, IOException
	{
		Thread.sleep(5000);
        WebElement calculator =  driver.findElement(By.linkText("Calculators"));
        calculator.click();
        Thread.sleep(5000);
        String checkCalc = driver.findElement(By.xpath("/html/body/div/div[2]/div[2]/h1")).getText();
        System.out.println(checkCalc);

        if(checkCalc.contains("Calculators"))
        {
            System.out.println("cal found");
			ss.getScreenShot(driver, "calc_verify.png");
            
        }
        else{
            System.out.println("Not found");
        }

        WebElement homeLoan = driver.findElement(By.xpath("/html/body/div/div[2]/div[2]/div[2]/a[15]"));
        homeLoan.click();
        Thread.sleep(5000);

       

        String loan ="2300000";
        String rateOfInt ="8";
        String ten = "25";

        WebElement loanAmount = driver.findElement(By.xpath("/html/body/div/div[2]/div[2]/div[1]/div[2]/div[1]/div[1]/div[1]/div[1]/div[1]/div[1]/div[2]/div/input"));
        loanAmount.clear();
        loanAmount.sendKeys(loan);
        WebElement rate = driver.findElement(By.xpath("/html/body/div/div[2]/div[2]/div[1]/div[2]/div[1]/div[1]/div[1]/div[1]/div[2]/div[1]/div[2]/div/input"));
        rate.clear();
        rate.sendKeys(rateOfInt);
        WebElement tenure = driver.findElement(By.xpath("/html/body/div/div[2]/div[2]/div[1]/div[2]/div[1]/div[1]/div[1]/div[1]/div[3]/div[1]/div[2]/div/input"));
        tenure.clear();
        tenure.sendKeys(ten);

        Thread.sleep(10000);


        String auto = driver.findElement(By.xpath("/html/body/div/div[2]/div[2]/div[1]/div[2]/div[1]/div[1]/div[2]/div/p")).getText();
        if(auto.contains("Your Amortization Details (Yearly/Monthly)"))
        {
            ss.getScreenShot(driver, "verify.png");
        }
		rr.generateExtentReport("groww-extent-reports");

        driver.close();
	}

	
}

Base.java:

package utils;

import java.io.FileInputStream;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.time.Duration;
import java.util.Properties;
import org.apache.log4j.Logger;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.edge.EdgeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;
import org.openqa.selenium.safari.SafariDriver;
import org.openqa.selenium.support.events.EventFiringDecorator;
import org.openqa.selenium.support.events.WebDriverListener;
import io.github.bonigarcia.wdm.WebDriverManager;

public class Base {
    public static WebDriver driver;
    public final int IMPLICIT_WAIT_TIME = 10;
    public final int PAGE_LOAD_TIME = 5;
    public Properties prop;

    public Base() {
        String filepath = System.getProperty("user.dir") + "/config/browser.properties";
    
        try {
            FileInputStream file = new FileInputStream(filepath);
            prop = new Properties();
            prop.load(file);
        } catch (IOException e) {
            System.out.println(e.getLocalizedMessage());
        }
    }

    public WebDriver openBrowser() throws MalformedURLException {
        String browsername = prop.getProperty("browsername");
        if (browsername.equalsIgnoreCase("chrome")) {
             DesiredCapabilities dc = new DesiredCapabilities();
             dc.setBrowserName("chrome");
             driver = new RemoteWebDriver(new URL("http://localhost:4444"), dc);
        } else if (browsername.equalsIgnoreCase("firefox")) {
            WebDriverManager.firefoxdriver().setup();
            driver = new FirefoxDriver();
        } else if (browsername.equalsIgnoreCase("edge")) {
            WebDriverManager.edgedriver().setup();
            driver = new EdgeDriver();
        } else if (browsername.equalsIgnoreCase("ie")) {
            WebDriverManager.iedriver().setup();
            driver = new InternetExplorerDriver();
        } else if (browsername.equalsIgnoreCase("safari")) {
            WebDriverManager.safaridriver().setup();
            driver = new SafariDriver();
        }
        driver.manage().window().maximize();
        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(IMPLICIT_WAIT_TIME));
        driver.manage().timeouts().pageLoadTimeout(Duration.ofSeconds(PAGE_LOAD_TIME));
        driver.get(prop.getProperty("url"));

        WebDriverListener listener = new EventHandler();
        driver = new EventFiringDecorator<>(listener).decorate(driver);
        return driver;
    }

    public void navigateToURL(WebDriver driver, Properties prop) {
        try {
            driver.get(prop.getProperty("url"));
        } catch (Exception e) {
            e.printStackTrace();

        }
    }
}
